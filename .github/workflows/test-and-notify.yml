name: Test and Notify

on:
  push:
    branches: [ develop ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: å®‰è£ä¾è³´
        run: npm install
      - name: åŸ·è¡Œæ¸¬è©¦
        run: npm test
      - name: ç™¼é€ Email é€šçŸ¥ï¼ˆå¤±æ•—æ™‚ï¼‰
        if: failure()
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: smtp.gmail.com
          server_port: 465
          username: ${{ secrets.MAIL_USERNAME }}
          password: ${{ secrets.MAIL_PASSWORD }}
          subject: "ğŸš¨ æ¸¬è©¦å¤±æ•—é€šçŸ¥"
          body: "develop åˆ†æ”¯æ¸¬è©¦å¤±æ•—ï¼Œè«‹ç›¡å¿«æª¢æŸ¥ï¼"
          to: Maers_Hsu@cameo.com.tw
          from: GitHub Actions <your@email.com>
